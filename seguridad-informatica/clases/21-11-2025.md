# üîê Pol√≠tica de Contrase√±as en Sistemas Linux

 En sistemas como **Ubuntu** la configuraci√≥n se divide entre:

- **PAM (Pluggable Authentication Modules)**: M√≥dulos en `/etc/pam.d/`
- **Archivo `/etc/login.defs`**: Par√°metros globales de cuentas


## ‚öôÔ∏è Configuraci√≥n B√°sica

### 1. Longitud M√≠nima de Contrase√±a
**Archivo**: `/etc/pam.d/common-password`

```bash
sudo nano /etc/pam.d/common-password
```

Buscar la l√≠nea con `pam_unix.so` y agregar:
```bash
minlen=8
```

**Ejemplo completo**:
```bash
password    requisite     pam_unix.so nullok obscure sha512 minlen=8
```

**Opcional**: Para reglas m√°s avanzadas (instalar primero):
```bash
apt install libpam-pwquality libpwquality-tools

# Luego configurar:
password requisite pam_pwquality.so retry=3 minlen=10 ucredit=-1 lcredit=-1 dcredit=-1 ocredit=-1
```

### 2. Caducidad para Nuevas Cuentas
**Archivo**: `/etc/login.defs`

```bash
sudo nano /etc/login.defs
```

| Par√°metro       | Descripci√≥n | Ejemplo |
|-----------------|-------------|---------|
| `PASS_MAX_DAYS` | D√≠as m√°ximos | `PASS_MAX_DAYS 90` |
| `PASS_MIN_DAYS` | D√≠as m√≠nimos entre cambios | `PASS_MIN_DAYS 1` |
| `PASS_WARN_AGE` | Aviso antes de expirar | `PASS_WARN_AGE 7` |

---

## üë§ Gesti√≥n de Usuarios Existentes

### Comando `chage`
Para usuarios ya creados:

```bash
# Configurar expiraci√≥n
sudo chage prometeo

# Ver configuraci√≥n actual
sudo chage -l prometeo

# Establecer expiraci√≥n en 7 d√≠as
sudo chage -M 7 prometeo
```

### Comando `passwd`
```bash
# Forzar cambio cada 30 d√≠as
passwd -x 30 nombreusuario
```

> **‚ö†Ô∏è Importante**: Estas restricciones solo aplican para usuarios **no privilegiados**. El usuario **root** puede saltarse todas las limitaciones.

---

## üîç Pruebas y Verificaci√≥n

### Probar pol√≠ticas
```bash
# Intentar cambiar contrase√±a (deber√≠a rechazar si es muy corta)
passwd prometeo

# Ver estado de usuario
sudo chage -l prometeo
```

### Verificar configuraci√≥n PAM
Revisar que los cambios en `/etc/pam.d/common-password` est√©n aplicados correctamente.

---

## üõ†Ô∏è Configuraci√≥n de Servicios

### PostgreSQL (para Metasploit)
```bash
systemctl enable postgresql.service
systemctl start postgresql.service
```

---

## üîß Conceptos de Seguridad Adicionales

### Archivos importantes:
- **`/etc/pam.d`**: Par√°metros de pol√≠ticas (se leen en orden)
- **`/etc/login.defs`**: Configuraci√≥n global (archivo delicado)
- **`faillock.conf`**: Para bloqueo por intentos fallidos

### Recomendaciones:
- Usar **SHA-512** en lugar de `yescript` para cifrado
- Contrase√±as de **m√≠nimo 8 caracteres** con mezcla de may√∫sculas, min√∫sculas, n√∫meros y s√≠mbolos
- Configurar **bloqueo temporal** tras intentos fallidos

---

## üéØ Metasploit - Conceptos B√°sicos

### Comandos √∫tiles:
```bash
workspace  # Organizar proyectos
```

### T√©rminos clave:
- **Exploit**: C√≥digo o t√©cnica para aprovechar vulnerabilidades
- **Payload**: Lo que ejecutas despu√©s de entrar al sistema

---

## üåê Conceptos de Red

### Subnetting
Divisi√≥n de redes para gesti√≥n de IPs

### Protocolo ARP
- Tabla que relaciona **direcciones MAC** con **IPs**
- Cada dispositivo guarda su propia tabla ARP para conexiones locales

---

## üí° Recordatorios Pr√°cticos

1. **Siempre verificar** cambios con `chage -l usuario`
2. **Probar** las pol√≠ticas con contrase√±as inv√°lidas
3. **Documentar** cambios en `/etc/security/`
4. **El orden importa** en archivos PAM - primera regla que aplica se ejecuta

> **Nota**: `/etc/login.defs` es archivo cr√≠tico - cualquier edici√≥n sospechosa podr√≠a indicar ataque al sistema.