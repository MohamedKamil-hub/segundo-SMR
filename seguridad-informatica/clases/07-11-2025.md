que es un riesgo en ciber
![[Pasted image 20251107160753.png]]
la seguridad es un proceso

como evitar 
crontab

![[Pasted image 20251107163022.png]]

![[Pasted image 20251107163411.png]]

![[Pasted image 20251107164253.png]]

![[Pasted image 20251107165258.png]]
![[Pasted image 20251107170248.png]]
![[Pasted image 20251107171430.png]]

![[Pasted image 20251107171836.png]]
![[Pasted image 20251107171953.png]]
![[Pasted image 20251107172716.png]]


Ejercicio NFTables Vamos a configurar un firewall en un Servidor con una sola interfaz de red
. La IP de nuestra máquina es la 192.168.153.134/24.  Los criterios son los siguientes: 
Borrar las reglas iniciales que puedan existir. 
 Solo nos preocuparemos de IPv4, dejando ipv6, inet, bridge, etc. 
Política por defecto DROP en nuestra máquina 
 Permitir acceso SSH al servidor desde cualquier máquina de la red local 
 Permitir tráfico de salida DNS (UDP/53) 
Permitir tráfico de salida http, https, SSH (TCP/22, TCP/80, TCP/443)  
Queremos llevar cuenta de los paquetes que cumplen cada regla para estudio y optimización posterior del firewall. NFTables –

user@server:~$ cat ejercicionft2
#!/usr/sbin/nft -f

flush ruleset

table ip filter {
        chain input {
                type filter hook input priority 0; policy drop;
                ip saddr  192.168.50.20  counter drop
                ip saddr  192.168.50.0/24 tcp dport 22 counter accept
        }
        chain forward {
                type filter hook forward priority 0; policy drop;
        }
        chain output {
                type filter hook output priority 0; policy drop;
                tcp  dport {53, 80, 443, 22} counter accept
                udp  dport 53 counter accept
        }
}
user@server:~$ cat copianftej1
#!/usr/sbin/nft -f

flush ruleset

table ip filter {
        chain input {
                type filter hook input priority 0; policy drop;
                ip saddr 10.0.2.0/24 tcp dport {22, 2223} counter accept
                ip saddr 192.168.1.0/24 tcp dport {22, 2223} counter accept
                ip saddr 127.0.0.1 tcp dport {22, 2223} counter accept
        }
        chain forward {
                type filter hook forward priority 0; policy drop;
        }
        chain output {
                type filter hook output priority 0; policy drop;
                udp dport 53 counter accept
                tcp dport {22, 2223, 80, 443} counter accept
        }
}



Ejercicio 2 Eres administrador de un servidor Linux con una sola interfaz de red en la red local 192.168.50.0/24. El servidor tiene la IP: 192.168.50.10/24. Tu objetivo es configurar un firewall seguro usando NFTables, siguiendo estos criterios: Política por defecto DROP: Todo el tráfico que no esté permitido explícitamente debe ser bloqueado. Permitir tráfico interno seguro: SSH desde cualquier host de la LAN (192.168.50.0/24) .CMP (ping) solo desde la LAN. Permitir tráfico de salida:DNS (UDP y TCP puerto 53). HTTP/HTTPS (TCP 80 y 443).SSH (TCP 22). Bloquear todo el resto y registrar los intentos con counter. Opcional: Bloquear un host específico de la LAN (192.168.50.20) para que no pueda acceder al servidor. Tareas del ejercicio : (Siguiente diapositiva) NFTables – Ejercicio 2 Parte 1: Preparación: - Limpiar todas las reglas existentes. - Crear la tabla inet filter. - Crear las cadenas input, output y forward con política drop. Parte 2: Reglas de entrada: - Permitir SSH solo desde la LAN. - Permitir ICMP (ping) solo desde la LAN. - Bloquear y contar paquetes de un host específico de la LAN (opcional). - Añadir counter a cada regla para monitorización. Parte 3: Reglas de salida: - Permitir DNS (UDP y TCP) al exterior. - Permitir HTTP/HTTPS al exterior. - Permitir SSH al exterior. - Añadir counter a cada regla. Parte 4: Verificación: Listar la configuración actual con sudo nft list ruleset. Comprobar contadores generando tráfico (ej. hacer ping desde la LAN o navegar desde el servidor). Ver qué paquetes han sido bloqueados. Parte 5 (reto extra) - Permitir tráfico web entrante (HTTP/HTTPS) solo desde un rango de IPs externo permitido (203.0.113.0/24).- Crear una regla que bloquee intentos de acceso a puertos no usados y contar los paquetes bloqueados.