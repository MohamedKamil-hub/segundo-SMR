protocolos

primero enable y luego start el ssh en systemctl 
instalar apache2
configurar archivo configuracion sitesponer el pagina.conf
decir document host virtualhost
decir alias errrores
crear sitio de de sitio web document root 
a2insite

miguel.alayon@thepower.education

mohamedkamil@mohamedserver:~$ cd /etc/apache2/
mohamedkamil@mohamedserver:/etc/apache2$ ls
apache2.conf    magic           sites-available
conf-available  mods-available  sites-enabled
conf-enabled    mods-enabled
envvars         ports.conf
mohamedkamil@mohamedserver:/etc/apache2$ nano apache2.conf
mohamedkamil@mohamedserver:/etc/apache2$ lcd sites-enabled/
Command 'lcd' not found, but there are 16 similar ones.
mohamedkamil@mohamedserver:/etc/apache2$ ls
apache2.conf    magic           sites-available
conf-available  mods-available  sites-enabled
conf-enabled    mods-enabled
envvars         ports.conf
mohamedkamil@mohamedserver:/etc/apache2$ cd sites-available/
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ ls
000-default.conf  default-ssl.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo nano default-ssl.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ touch santander.conf
touch: cannot touch 'santander.conf': Permission denied
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo santander.conf
sudo: santander.conf: command not found
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo touch santander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo nano sandander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ cat santander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ ls
000-default.conf  sandander.conf
default-ssl.conf  santander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ cd santander.conf
-bash: cd: santander.conf: Not a directory
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ cat santander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ nano santander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo nano santander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo nano sandander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ ls
000-default.conf  sandander.conf
default-ssl.conf  santander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo nano sandander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ rm santander.conf
rm: remove write-protected regular empty file 'santander.conf'?
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ rm santander.conf
rm: remove write-protected regular empty file 'santander.conf'?
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ rm santander.conf
rm: remove write-protected regular empty file 'santander.conf'?
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ ls
000-default.conf  sandander.conf
default-ssl.conf  santander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo rm santander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ ls
000-default.conf  default-ssl.conf  sandander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ nano sandander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ ls
000-default.conf  default-ssl.conf  sandander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ cd ..
mohamedkamil@mohamedserver:/etc/apache2$ cd /var/www/santander
-bash: cd: /var/www/santander: No such file or directory
mohamedkamil@mohamedserver:/etc/apache2$ cd /var/www
mohamedkamil@mohamedserver:/var/www$ mkdir santander
mkdir: cannot create directory ‘santander’: Permission denied
mohamedkamil@mohamedserver:/var/www$ sudo mkdir santander
mohamedkamil@mohamedserver:/var/www$ cd santander/
mohamedkamil@mohamedserver:/var/www/santander$ touch index.html
touch: cannot touch 'index.html': Permission denied
mohamedkamil@mohamedserver:/var/www/santander$ sudo touc
h index.html
mohamedkamil@mohamedserver:/var/www/santander$ sudo a2en
site santander.local
ERROR: Site santander.local does not exist!
mohamedkamil@mohamedserver:/var/www/santander$ sudo nano index.html
mohamedkamil@mohamedserver:/var/www/santander$ cd ..
mohamedkamil@mohamedserver:/var/www$ ls
html  santander
mohamedkamil@mohamedserver:/var/www$ cd html/
mohamedkamil@mohamedserver:/var/www/html$ ls
index.html
mohamedkamil@mohamedserver:/var/www/html$ cd /etc/apache2/sites-available/
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ ls
000-default.conf  default-ssl.conf  sandander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ cat default-ssl.conf
<VirtualHost *:443>
        ServerAdmin webmaster@localhost

        DocumentRoot /var/www/html

        # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,
        # error, crit, alert, emerg.
        # It is also possible to configure the loglevel for particular
        # modules, e.g.
        #LogLevel info ssl:warn

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

        # For most configuration files from conf-available/, which are
        # enabled or disabled at a global level, it is possible to
        # include a line for only one particular virtual host. For example the
        # following line enables the CGI configuration for this host only
        # after it has been globally disabled with "a2disconf".
        #Include conf-available/serve-cgi-bin.conf

        #   SSL Engine Switch:
        #   Enable/Disable SSL for this virtual host.
        SSLEngine on

        #   A self-signed (snakeoil) certificate can be created by installing
        #   the ssl-cert package. See
        #   /usr/share/doc/apache2/README.Debian.gz for more info.
        #   If both key and certificate are stored in the same file, only the
        #   SSLCertificateFile directive is needed.
        SSLCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem
        SSLCertificateKeyFile   /etc/ssl/private/ssl-cert-snakeoil.key

        #   Server Certificate Chain:
        #   Point SSLCertificateChainFile at a file containing the
        #   concatenation of PEM encoded CA certificates which form the
        #   certificate chain for the server certificate. Alternatively
        #   the referenced file can be the same as SSLCertificateFile
        #   when the CA certificates are directly appended to the server
        #   certificate for convinience.
        #SSLCertificateChainFile /etc/apache2/ssl.crt/server-ca.crt

        #   Certificate Authority (CA):
        #   Set the CA certificate verification path where to find CA
        #   certificates for client authentication or alternatively one
        #   huge file containing all of them (file must be PEM encoded)
        #   Note: Inside SSLCACertificatePath you need hash symlinks
        #         to point to the certificate files. Use the provided
        #         Makefile to update the hash symlinks after changes.
        #SSLCACertificatePath /etc/ssl/certs/
        #SSLCACertificateFile /etc/apache2/ssl.crt/ca-bundle.crt

        #   Certificate Revocation Lists (CRL):
        #   Set the CA revocation path where to find CA CRLs for client
        #   authentication or alternatively one huge file containing all
        #   of them (file must be PEM encoded)
        #   Note: Inside SSLCARevocationPath you need hash symlinks
        #         to point to the certificate files. Use the provided
        #         Makefile to update the hash symlinks after changes.
        #SSLCARevocationPath /etc/apache2/ssl.crl/
        #SSLCARevocationFile /etc/apache2/ssl.crl/ca-bundle.crl

        #   Client Authentication (Type):
        #   Client certificate verification type and depth.  Types are
        #   none, optional, require and optional_no_ca.  Depth is a
        #   number which specifies how deeply to verify the certificate
        #   issuer chain before deciding the certificate is not valid.
        #SSLVerifyClient require
        #SSLVerifyDepth  10

        #   SSL Engine Options:
        #   Set various options for the SSL engine.
        #   o FakeBasicAuth:
        #    Translate the client X.509 into a Basic Authorisation.  This means that
        #    the standard Auth/DBMAuth methods can be used for access control.  The
        #    user name is the `one line' version of the client's X.509 certificate.
        #    Note that no password is obtained from the user. Every entry in the user
        #    file needs this password: `xxj31ZMTZzkVA'.
        #   o ExportCertData:
        #    This exports two additional environment variables: SSL_CLIENT_CERT and
        #    SSL_SERVER_CERT. These contain the PEM-encoded certificates of the
        #    server (always existing) and the client (only existing when client
        #    authentication is used). This can be used to import the certificates
        #    into CGI scripts.
        #   o StdEnvVars:
        #    This exports the standard SSL/TLS related `SSL_*' environment variables.
        #    Per default this exportation is switched off for performance reasons,
        #    because the extraction step is an expensive operation and is usually
        #    useless for serving static content. So one usually enables the
        #    exportation for CGI and SSI requests only.
        #   o OptRenegotiate:
        #    This enables optimized SSL connection renegotiation handling when SSL
        #    directives are used in per-directory context.
        #SSLOptions +FakeBasicAuth +ExportCertData +StrictRequire
        <FilesMatch "\.(?:cgi|shtml|phtml|php)$">
                SSLOptions +StdEnvVars
        </FilesMatch>
        <Directory /usr/lib/cgi-bin>
                SSLOptions +StdEnvVars
        </Directory>
</VirtualHost>
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ cat sandander.conf
<VirtualHost *:80>
        ServerAdmin webmaster@santander.local
        ServerName santander.local
        ServerAlias www.santander.local
        DocumentRoot /var/www/santander
        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ ls
000-default.conf  default-ssl.conf  sandander.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo mv santander.conf santander.local.conf
mv: cannot stat 'santander.conf': No such file or directory
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo chmod 777 sandande
r.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo mv santander.conf santander.local.conf
mv: cannot stat 'santander.conf': No such file or directory
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo mv sandander.conf santander.local.conf
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo nano /etc/hosts
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ systemctl restart apache2
==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ====
Authentication is required to restart 'apache2.service'.
Multiple identities can be used for authentication:
 1.  mohamed (mohamedkamil)
 2.  ,,, (prometeo)
Choose identity to authenticate as (1-2): 1
Password:
==== AUTHENTICATION COMPLETE ====
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ systemctl status apache
2
● apache2.service - The Apache HTTP Server
     Loaded: loaded (/usr/lib/systemd/system/apache2.service; enabled; preset: >
     Active: active (running) since Thu 2025-10-30 15:54:48 UTC; 9s ago
       Docs: https://httpd.apache.org/docs/2.4/
    Process: 1915 ExecStart=/usr/sbin/apachectl start (code=exited, status=0/SU>
   Main PID: 1920 (apache2)
      Tasks: 55 (limit: 4644)
     Memory: 5.3M (peak: 5.5M)
        CPU: 18ms
     CGroup: /system.slice/apache2.service
             ├─1920 /usr/sbin/apache2 -k start
             ├─1922 /usr/sbin/apache2 -k start
             └─1923 /usr/sbin/apache2 -k start

oct 30 15:54:48 mohamedserver systemd[1]: Starting apache2.service - The Apache>
oct 30 15:54:48 mohamedserver apachectl[1919]: AH00558: apache2: Could not reli>
oct 30 15:54:48 mohamedserver systemd[1]: Started apache2.service - The Apache >
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ curl santander.local
<h1>Hola, MohamedKamil\!</h1>
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ cat santander.local.conf
<VirtualHost *:80>
        ServerAdmin webmaster@santander.local
        ServerName santander.local
        ServerAlias www.santander.local
        DocumentRoot /var/www/santander
        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ cat /var/www/santander/index.html
<h1> santander </h1>
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo a2dissite 000-default.conf
Site 000-default disabled.
To activate the new configuration, you need to run:
  systemctl reload apache2
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo a2ensite santander.local.conf
Enabling site santander.local.
To activate the new configuration, you need to run:
  systemctl reload apache2
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo systemctl reload apache2
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ sudo nano /etc/hosts
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ curl santander.local
<h1> santander </h1>
mohamedkamil@mohamedserver:/etc/apache2/sites-available$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host noprefixroute
       valid_lft forever preferred_lft forever
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:3a:87:c1 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.220/24 brd 192.168.1.255 scope global enp0s3
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe3a:87c1/64 scope link
       valid_lft forever preferred_lft forever
mohamedkamil@mohamedserver:/etc/apache2/sites-available$